var link=document.querySelector(".button-search"),popup=document.querySelector(".search"),form=popup.querySelector("form"),arriveDate=popup.querySelector("[name=arrival-date]"),leaveDate=popup.querySelector("[name=leave-date]"),adultsNumber=popup.querySelector("[name=adults]"),childrenNumber=popup.querySelector("[name=children]"),adultsMinus=popup.querySelector(".adults-minus"),adultsPlus=popup.querySelector(".adults-plus"),childrenMinus=popup.querySelector(".children-minus"),childrenPlus=popup.querySelector(".children-plus"),isStorageSupport=!!window.localStorage;form.classList.add("search-form-show"),link.addEventListener("click",function(e){e.preventDefault(),form.classList.contains("search-form-show")?form.classList.remove("search-form-show"):form.classList.add("search-form-show"),isStorageSupport&&null!=localStorage.getItem("adultsNumber")&&null!=localStorage.getItem("childrenNumber")?(adultsNumber.value=localStorage.getItem("adultsNumber"),childrenNumber.value=localStorage.getItem("childrenNumber")):(adultsNumber.value=2,childrenNumber.value=0),arriveDate.focus()}),form.addEventListener("submit",function(e){arriveDate.value&&leaveDate.value&&adultsNumber.value&&childrenNumber.value?isStorageSupport&&(localStorage.setItem("adultsNumber",adultsNumber.value),localStorage.setItem("childrenNumber",childrenNumber.value)):(e.preventDefault(),form.classList.remove("search-form-error"),form.offsetWidth=form.offsetWidth,form.classList.add("search-form-error"))}),adultsMinus.addEventListener("click",function(e){e.preventDefault(),1<adultsNumber.value&&--adultsNumber.value}),adultsPlus.addEventListener("click",function(e){e.preventDefault(),adultsNumber.value<99&&++adultsNumber.value}),childrenMinus.addEventListener("click",function(e){e.preventDefault(),0<childrenNumber.value&&--childrenNumber.value}),childrenPlus.addEventListener("click",function(e){e.preventDefault(),childrenNumber.value<99&&++childrenNumber.value}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("search-form-show")&&(popup.classList.remove("search-form-show"),popup.classList.remove("search-form-error")))});
